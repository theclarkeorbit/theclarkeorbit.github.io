<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="author" content="thefakir">
    <title>The Nikola Handbook | The Clarke Orbit</title>
    
            <link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">

    



    
</head>
<body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top" id="navbar">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href="../">
            The Clarke Orbit
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                <li><a href="../archive.html">Archives</a>
                </li><li><a href="../categories/index.html">Tags</a>
                </li><li><a href="../rss.xml">RSS</a>

                </li></ul>
                <ul class="nav pull-right">
                
                
                    <li>
			<a href="handbook.rst" id="sourcelink">Source</a>
		</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
    <h1>The Nikola Handbook</h1>
    <table class="docinfo" frame="void" rules="none">
<col class="docinfo-name">
<col class="docinfo-content">
<tbody valign="top">
<tr><th class="docinfo-name">Version:</th>
<td>6.2.1</td></tr>
</tbody>
</table>
<div class="contents alert alert-info pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="handbook.html#all-you-need-to-know" id="id3">All You Need to Know</a></li>
<li><a class="reference internal" href="handbook.html#what-s-nikola-and-what-can-you-do-with-it" id="id4">What's Nikola and what can you do with it?</a></li>
<li><a class="reference internal" href="handbook.html#getting-help" id="id5">Getting Help</a></li>
<li><a class="reference internal" href="handbook.html#why-static" id="id6">Why Static?</a></li>
<li><a class="reference internal" href="handbook.html#features" id="id7">Features</a></li>
<li><a class="reference internal" href="handbook.html#installing-nikola" id="id8">Installing Nikola</a><ul>
<li><a class="reference internal" href="handbook.html#installation-on-linux-mac-os-x-bsd-and-any-other-posix-compatible-os" id="id9">Installation on Linux, Mac OS X, *BSD, and any other POSIX-compatible OS</a></li>
<li><a class="reference internal" href="handbook.html#installation-on-windows-and-windows-support" id="id10">Installation on Windows and Windows support</a></li>
</ul>
</li>
<li><a class="reference internal" href="handbook.html#getting-started" id="id11">Getting Started</a></li>
<li><a class="reference internal" href="handbook.html#creating-a-blog-post" id="id12">Creating a Blog Post</a><ul>
<li><a class="reference internal" href="handbook.html#teasers" id="id13">Teasers</a></li>
<li><a class="reference internal" href="handbook.html#drafts" id="id14">Drafts</a></li>
<li><a class="reference internal" href="handbook.html#retired-posts" id="id15">Retired Posts</a></li>
<li><a class="reference internal" href="handbook.html#queuing-posts" id="id16">Queuing Posts</a></li>
</ul>
</li>
<li><a class="reference internal" href="handbook.html#creating-a-page" id="id17">Creating a Page</a></li>
<li><a class="reference internal" href="handbook.html#redirections" id="id18">Redirections</a></li>
<li><a class="reference internal" href="handbook.html#configuration" id="id19">Configuration</a></li>
<li><a class="reference internal" href="handbook.html#customizing-your-site" id="id20">Customizing Your Site</a></li>
<li><a class="reference internal" href="handbook.html#adding-files" id="id21">Adding Files</a></li>
<li><a class="reference internal" href="handbook.html#getting-more-themes" id="id22">Getting More Themes</a></li>
<li><a class="reference internal" href="handbook.html#deployment" id="id23">Deployment</a></li>
<li><a class="reference internal" href="handbook.html#comments-and-annotations" id="id24">Comments and Annotations</a></li>
<li><a class="reference internal" href="handbook.html#image-galleries" id="id25">Image Galleries</a></li>
<li><a class="reference internal" href="handbook.html#post-processing-filters" id="id26">Post Processing Filters</a></li>
<li><a class="reference internal" href="handbook.html#optimizing-your-website" id="id27">Optimizing Your Website</a></li>
<li><a class="reference internal" href="handbook.html#restructuredtext-extensions" id="id28">reStructuredText Extensions</a><ul>
<li><a class="reference internal" href="handbook.html#media" id="id29">Media</a></li>
<li><a class="reference internal" href="handbook.html#youtube" id="id30">YouTube</a></li>
<li><a class="reference internal" href="handbook.html#vimeo" id="id31">Vimeo</a></li>
<li><a class="reference internal" href="handbook.html#soundcloud" id="id32">Soundcloud</a></li>
<li><a class="reference internal" href="handbook.html#code" id="id33">Code</a></li>
<li><a class="reference internal" href="handbook.html#listing" id="id34">Listing</a></li>
<li><a class="reference internal" href="handbook.html#gist" id="id35">Gist</a></li>
<li><a class="reference internal" href="handbook.html#slideshows" id="id36">Slideshows</a></li>
<li><a class="reference internal" href="handbook.html#chart" id="id37">Chart</a></li>
<li><a class="reference internal" href="handbook.html#doc" id="id38">Doc</a></li>
</ul>
</li>
<li><a class="reference internal" href="handbook.html#importing-your-wordpress-site-into-nikola" id="id39">Importing Your WordPress Site Into Nikola</a><ul>
<li><a class="reference internal" href="handbook.html#importing-to-a-custom-location-or-into-an-existing-site" id="id40">Importing To A Custom Location Or Into An Existing Site</a></li>
</ul>
</li>
<li><a class="reference internal" href="handbook.html#using-twitter-cards" id="id41">Using Twitter Cards</a></li>
<li><a class="reference internal" href="handbook.html#extra-plugins" id="id42">Extra Plugins</a><ul>
<li><a class="reference internal" href="handbook.html#planetoid" id="id43">Planetoid</a></li>
<li><a class="reference internal" href="handbook.html#local-search" id="id44">Local Search</a></li>
<li><a class="reference internal" href="handbook.html#mustache" id="id45">Mustache</a></li>
</ul>
</li>
<li><a class="reference internal" href="handbook.html#custom-plugins" id="id46">Custom Plugins</a></li>
<li><a class="reference internal" href="handbook.html#getting-extra-plugins" id="id47">Getting Extra Plugins</a></li>
<li><a class="reference internal" href="handbook.html#license" id="id48">License</a></li>
</ul>
</div>
<div class="section" id="all-you-need-to-know">
<h2><a class="toc-backref" href="handbook.html#id3">All You Need to Know</a></h2>
<p>After you have Nikola <a class="reference external" href="handbook.html#installing-nikola">installed</a>:</p>
<dl class="docutils">
<dt>Create a empty site:</dt>
<dd><tt class="docutils literal">nikola init mysite</tt></dd>
</dl>
<p>You can create a site with demo files in it with <tt class="docutils literal">nikola init <span class="pre">--demo</span> mysite</tt></p>
<p>The rest of these commands have to be executed inside the new <tt class="docutils literal">mysite</tt> folder.</p>
<dl class="docutils">
<dt>Create a post:</dt>
<dd><tt class="docutils literal">nikola new_post</tt></dd>
<dt>Edit the post:</dt>
<dd>The filename should be in the output of the previous command.</dd>
<dt>Build the site:</dt>
<dd><tt class="docutils literal">nikola build</tt></dd>
<dt>Start the test server:</dt>
<dd><tt class="docutils literal">nikola serve</tt></dd>
<dt>See the site:</dt>
<dd><a class="reference external" href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></dd>
</dl>
<p>That should get you going. If you want to know more, this manual will always be here
for you.</p>
<p>DON'T READ THIS MANUAL. IF YOU NEED TO READ IT I FAILED, JUST USE THE THING.</p>
<p>On the other hand, if anything about Nikola is not as obvious as it should be, by all
means tell me about it :-)</p>
</div>
<div class="section" id="what-s-nikola-and-what-can-you-do-with-it">
<h2><a class="toc-backref" href="handbook.html#id4">What's Nikola and what can you do with it?</a></h2>
<p>Nikola is a static website and blog generator. The very short explanation is
that it takes some texts you wrote, and uses them to create a folder full
of HTML files. If you upload that folder to a server, you will have a
rather full-featured website, done with little effort.</p>
<p>It's original goal is to create blogs, but it supports most kind of sites, and
can be used as a CMS, as long as what you present to the user is your own content
instead of something the user generates.</p>
<p>Nikola can do:</p>
<ul class="simple">
<li>A blog (<a class="reference external" href="http://ralsina.me">example</a>)</li>
<li>Your company's site</li>
<li>Your personal site</li>
<li>A software project's site (<a class="reference external" href="http://getnikola.com">example</a>)</li>
<li>A book's site</li>
</ul>
<p>Since Nikola-based sites don't run any code on the server, there is no way to process
user input in forms.</p>
<p>Nikola can't do:</p>
<ul class="simple">
<li>Twitter</li>
<li>Facebook</li>
<li>An Issue tracker</li>
<li>Anything with forms, really (except for <a class="reference external" href="handbook.html#comments-and-annotations">comments</a>!)</li>
</ul>
<p>Keep in mind that "static" doesn't mean <strong>boring</strong>. You can have animations, slides
or whatever fancy CSS/HTML5 thingie you like. It only means all that HTML is
generated already before being uploaded. On the other hand, Nikola sites will
tend to be content-heavy. What Nikola is good at is at putting what you write
out there.</p>
</div>
<div class="section" id="getting-help">
<h2><a class="toc-backref" href="handbook.html#id5">Getting Help</a></h2>
<ul class="simple">
<li>Feel free to contact me at <a class="reference external" href="mailto:ralsina@netmanagers.com.ar">ralsina@netmanagers.com.ar</a> for questions about Nikola.</li>
<li>You can file bugs at <a class="reference external" href="https://github.com/getnikola/nikola/issues">the issue tracker</a></li>
<li>You can discuss Nikola at the <a class="reference external" href="http://groups.google.com/group/nikola-discuss">nikola-discuss google group</a></li>
<li>You can subscribe to <a class="reference external" href="http://getnikola.com/blog">the Nikola Blog</a></li>
<li>You can follow <a class="reference external" href="https://twitter.com/nikolagenerator">Nikola on Twitter</a></li>
</ul>
</div>
<div class="section" id="why-static">
<h2><a class="toc-backref" href="handbook.html#id6">Why Static?</a></h2>
<p>Most "modern" websites are <em>dynamic</em> in the sense that the contents of the site
live in a database, and are converted into presentation-ready HTML only when a
user wants to see the page. That's great. However, it presents some minor issues
that static site generators try to solve.</p>
<p>In a static site, the whole site, every page, <em>everything</em>, is created before
the first user even sees it and uploaded to the server as a simple folder full
of HTML files (and images, CSS, etc).</p>
<p>So, let's see some reasons for using static sites:</p>
<dl class="docutils">
<dt>Security</dt>
<dd><p class="first">Dynamic sites are prone to experience security issues. The solution for that
is constant vigilance, keeping the software behind the site updated, and
plain old good luck. The stack of software used to provide a static site,
like those Nikola generates, is much smaller (Just a web server).</p>
<p class="last">A smaller software stack implies less security risk.</p>
</dd>
<dt>Obsolescense</dt>
<dd><p class="first">If you create a site using (for example) WordPress, what happens when WordPress
releases a new version? You have to update your WordPress. That is not optional,
because of security and support issues. If I release a new version of Nikola, and
you don't update, <em>nothing</em> happens. You can continue to use the version you
have now forever, no problems.</p>
<p>Also, in the longer term, the very foundations of dynamic sites shift. Can you
still deploy a blog software based on Django 0.96? What happens when your
host stops supporting the php version you rely on? And so on.</p>
<p>You may say those are long term issues, or that they won't matter for years. Well,
I believe things should work forever, or as close to it as we can make them.
Nikola's static output and its input files will work as long as you can install
a Python &gt; 2.6 in a Linux, Windows, or Mac and can find a server
that sends files over HTTP. That's probably 10 or 15 years at least.</p>
<p class="last">Also, static sites are easily handled by the Internet Archive.</p>
</dd>
<dt>Cost and Performance</dt>
<dd><p class="first">On dynamic sites, every time a reader wants a page, a whole lot of database
queries are made. Then a whole pile of code chews that data, and HTML is
produced, which is sent to the user. All that requires CPU and memory.</p>
<p class="last">On a static site, the highly optimized HTTP server reads the file from disk
(or, if it's a popular file, from disk cache), and sends it to the user. You could
probably serve a bazillion (technical term) pageviews from a phone using
static sites.</p>
</dd>
<dt>Lockin</dt>
<dd><p class="first">On server-side blog platforms, sometimes you can't export your own data, or
it's in strange formats you can't use in other services. I have switched
blogging platforms from Advogato to PyCs to two homebrew systems, to Nikola,
and have never lost a file, a URL, or a comment. That's because I have <em>always</em>
had my own data in a format of my choice.</p>
<p class="last">With Nikola, you own your files, and you can do anything with them.</p>
</dd>
</dl>
</div>
<div class="section" id="features">
<h2><a class="toc-backref" href="handbook.html#id7">Features</a></h2>
<p>Nikola has a very defined feature set: it has every feature I needed for my own sites.
Hopefully, it will be enough for others, and anyway, I am open to suggestions.</p>
<p>If you want to create a blog or a site, Nikola provides:</p>
<ul class="simple">
<li>Front page (and older posts pages)</li>
<li>RSS Feeds</li>
<li>Pages and feeds for each tag you used</li>
<li>Custom search</li>
<li>Full yearly archives</li>
<li>Custom output paths for generated pages</li>
<li>Easy page template customization</li>
<li>Static pages (not part of the blog)</li>
<li>Internationalization support (my own blog is English/Spanish)</li>
<li>Google sitemap generation</li>
<li>Custom deployment (if it's a command, you can use it)</li>
<li>A (very) basic look and feel you can customize, and is even text-mode friendly</li>
<li>The input format is light markup (<a class="reference external" href="quickstart.html">reStructuredText</a> or
<a class="reference external" href="http://daringfireball.net/projects/markdown/">Markdown</a>)</li>
<li>Easy-to-create image galleries</li>
<li>Support for displaying source code</li>
<li>Image slideshows</li>
<li>Client-side cloud tags</li>
</ul>
<p>Also:</p>
<ul class="simple">
<li>A preview web server</li>
<li>"Live" re-rendering while you edit</li>
<li>"Smart" builds: only what changed gets rebuilt (usually in seconds)</li>
<li>Easy to extend with minimal Python knowledge.</li>
</ul>
</div>
<div class="section" id="installing-nikola">
<h2><a class="toc-backref" href="handbook.html#id8">Installing Nikola</a></h2>
<p>This is currently lacking on detail. Considering the niche Nikola is aimed at,
I suspect that's not a problem yet. So, when I say "get", the specific details
of how to "get" something for your specific operating system are left to you.</p>
<p>The short version is: <tt class="docutils literal">pip install nikola</tt></p>
<p>Note that you need Python v2.6 or newer OR v3.3 or newer.</p>
<p>For some features it may give you an error message telling you that you need to
install something else. For example, if it tells you you need <tt class="docutils literal">requests</tt>:</p>
<pre class="literal-block">
pip install requests
</pre>
<p>And so on.</p>
<p>Longer version:</p>
<ol class="arabic simple">
<li>Get <a class="reference external" href="http://getnikola.com/">Nikola</a></li>
<li>Install dependencies. To do that, either:<ol class="arabic">
<li><tt class="docutils literal">pip install <span class="pre">-r</span> requirements.txt</tt> (or <tt class="docutils literal"><span class="pre">requirements-full.txt</span></tt>
for extra stuff) and <tt class="docutils literal">pip install .</tt> or...</li>
<li>Install your distribution's packages for all the things
mentioned below, if they exist, or...</li>
<li>Get all of these manually (but why?, use pip):<ol class="arabic">
<li>Get Python, if you don't have it.</li>
<li>Get <a class="reference external" href="http://pydoit.org">doit</a></li>
<li>Get <a class="reference external" href="http://docutils.sf.net">docutils</a></li>
<li>Get <a class="reference external" href="http://makotemplates.org">Mako</a></li>
<li>Get <a class="reference external" href="http://python-imaging.github.io/">Pillow</a></li>
<li>Get <a class="reference external" href="http://pygments.org/">Pygments</a></li>
<li>Get <a class="reference external" href="http://pypi.python.org/pypi/Unidecode/">unidecode</a></li>
<li>Get <a class="reference external" href="http://lxml.de/">lxml</a></li>
<li>Get <a class="reference external" href="http://yapsy.sourceforge.net">yapsy</a></li>
<li>Get <a class="reference external" href="http://www.dalkescientific.com/Python/PyRSS2Gen.html">PyRSS2Gen</a></li>
<li>Get <a class="reference external" href="http://pytz.sourceforge.net/">pytz</a></li>
<li>If using Python 2, get <a class="reference external" href="http://pypi.python.org/pypi/configparser/3.2.0r3">configparser</a></li>
</ol>
</li>
</ol>
</li>
<li>run <tt class="docutils literal">python setup.py install</tt></li>
</ol>
<p>After that, run <tt class="docutils literal">nikola init <span class="pre">--demo</span> sitename</tt> and that will create a folder called
<tt class="docutils literal">sitename</tt> containing a functional demo site.</p>
<p>Nikola is packaged for some Linux distributions, you may get that instead.</p>
<p><em>NOTE</em>: If you get a <tt class="docutils literal">ERROR: /bin/sh: 1: <span class="pre">xslt-config:</span> not found</tt> or <tt class="docutils literal">fatal error:
libxml/xmlversion.h: No such file or directory</tt> when running <tt class="docutils literal">pip install <span class="pre">-r</span> requirements.txt</tt>, install <em>libxml</em> and <em>libxslt</em> libraries, like so:</p>
<p>Debian systems:</p>
<pre class="literal-block">
sudo apt-get install libxml2-dev
sudo apt-get install libxslt1-dev
</pre>
<p>Red Hat/RPM based systems:</p>
<pre class="literal-block">
yum install libxslt-devel libxml2-devel
</pre>
<div class="section" id="installation-on-linux-mac-os-x-bsd-and-any-other-posix-compatible-os">
<h3><a class="toc-backref" href="handbook.html#id9">Installation on Linux, Mac OS X, *BSD, and any other POSIX-compatible OS</a></h3>
<p>(we obviously support all.)</p>
<p>Using <tt class="docutils literal">pip</tt> should suffice.  You may also want to use distribution- or
system-specific packages for our dependencies.</p>
<p>There are <strong>no known issues or caveats</strong> on those OSes.  Keep in mind that most
of our developers run Linux on a daily basis and may not have the full
knowledge required to resolve issues relating to your operating system.</p>
</div>
<div class="section" id="installation-on-windows-and-windows-support">
<h3><a class="toc-backref" href="handbook.html#id10">Installation on Windows and Windows support</a></h3>
<p>Nikola supports Windows!  Keep in mind, though, that there are some
caveats:</p>
<p>1. <tt class="docutils literal">lxml</tt> and <tt class="docutils literal">Pillow</tt> require compiled extensions.  Compiling them on
Windows is hard for most people.  Fortunately, compiled packages exist.  Check
their <a class="reference external" href="https://pypi.python.org/">PyPI</a> pages to find official packages, <a class="reference external" href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">the unofficial Gohlke binaries</a> site, or get them somewhere else.  If you are using virtualenvs, using those pre-built packages is possible through <tt class="docutils literal">virtualenv <span class="pre">--system-site-packages</span></tt>.
2. Windows has some differences over POSIX, which may cause some features to work incorrectly under Windows.  If any problems occur, please do not hesitate to report them.  Some of the differeces include:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal">\</tt> as path separator (instead of <tt class="docutils literal">/</tt>)</li>
<li>the concept of partitions</li>
<li>some characters in paths are disallowed (although this shouldn’t cause
problems)</li>
<li>CR+LF (aka <tt class="docutils literal">\r\n</tt>) as the line separator (instead of LF <tt class="docutils literal">\n</tt>)</li>
</ul>
</blockquote>
<ol class="arabic simple" start="3">
<li>Windows also dislikes some characters in paths.</li>
<li>Most of our developers run Linux on a daily basis and may not have the full knowledge required to resolve issues relating to Windows.</li>
</ol>
</div>
</div>
<div class="section" id="getting-started">
<h2><a class="toc-backref" href="handbook.html#id11">Getting Started</a></h2>
<p>To create posts and pages in Nikola, you write them in one of the supported input formats.
Those source files are later converted to HTML
The recommended formats are reStructuredText and Markdown, but there is also support
for textile and WikiCreole and even for just writing HTML.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">There is a great <a class="reference external" href="quickstart.html">quick tutorial to learn reStructuredText.</a></p>
</div>
<p>First, let's see how you "build" your site. Nikola comes with a minimal site to get you started.</p>
<p>The tool used to do builds is called <a class="reference external" href="http://pydoit.org">doit</a>, and it rebuilds the
files that are not up to date, so your site always reflects your latest content. To do our
first build, just run "nikola build":</p>
<pre class="literal-block">
$ nikola build
Scanning posts....done!
.  render_posts:stories/manual.html
.  render_posts:posts/1.html
.  render_posts:stories/1.html
.  render_archive:output/2012/index.html
.  render_archive:output/archive.html
.  render_indexes:output/index.html
.  render_pages:output/posts/welcome-to-nikola.html
.  render_pages:output/stories/about-nikola.html
.  render_pages:output/stories/handbook.html
.  render_rss:output/rss.xml
.  render_sources:output/stories/about-nikola.txt
⋮
⋮
⋮
</pre>
<p>Nikola will print a line for every output file it generates. If we do it again, that
will be much much shorter:</p>
<pre class="literal-block">
$ nikola build
Scanning posts....done!
</pre>
<p>That is because <a class="reference external" href="http://pydoit.org">doit</a> is smart enough not to generate
all the pages again, unless you changed something that the page requires. So, if you change
the text of a post, or its title, that post page, and all index pages where it is mentioned,
will be recreated. If you change the post page template, then all the post pages will be rebuilt.</p>
<p>Nikola is mostly a series of doit <em>tasks</em>, and you can see them by doing <tt class="docutils literal">nikola list</tt>:</p>
<pre class="literal-block">
$ nikola list
Scanning posts....done!
build_bundles
copy_assets
copy_files
deploy
redirect
render_archive
render_galleries
render_indexes
render_listings
render_pages
render_posts
render_rss
render_site
render_sources
render_tags
sitemap
</pre>
<p>You can make Nikola redo everything by calling <tt class="docutils literal">nikola forget</tt> and then <tt class="docutils literal">nikola build</tt> (or <tt class="docutils literal">nikola build <span class="pre">-a</span></tt>,
you can make it do just a specific part of the site using task names, for example <tt class="docutils literal">nikola build render_pages</tt>,
and even individual files like <tt class="docutils literal">nikola build output/index.html</tt></p>
<p>Nikola also has other commands besides <tt class="docutils literal">build</tt>:</p>
<pre class="literal-block">
$ nikola help
    Nikola is a tool to create static websites and blogs. For full documentation and more information,
    please visit http://getnikola.com


    Available commands:
    nikola auto                 automatically detect site changes, rebuild and optionally refresh a browser
    nikola bootswatch_theme     given a swatch name from bootswatch.com and a parent theme, creates a custom theme
    nikola build                run tasks
    nikola check                check links and files in the generated site
    nikola clean                clean action / remove targets
    nikola console              start an interactive python console with access to your site and configuration
    nikola deploy               deploy the site
    nikola dumpdb               dump dependency DB
    nikola forget               clear successful run status from internal DB
    nikola help                 show help
    nikola ignore               ignore task (skip) on subsequent runs
    nikola import_blogger       import a blogger dump
    nikola import_feed          import a RSS/Atom dump
    nikola import_wordpress     import a WordPress dump
    nikola init                 create a Nikola site in the specified folder
    nikola install_theme        install theme into current site
    nikola list                 list tasks from dodo file
    nikola mincss               apply mincss to the generated site
    nikola new_post             create a new blog post or site page
    nikola run                  run tasks
    nikola serve                start the test webserver
    nikola strace               use strace to list file_deps and targets
    nikola version              print the Nikola version number

    nikola help                 show help / reference
    nikola help &lt;command&gt;       show command usage
    nikola help &lt;task-name&gt;     show task usage
</pre>
<p>The <tt class="docutils literal">serve</tt> command starts a web server so you can see the site you are creating:</p>
<pre class="literal-block">
$ nikola serve
Serving HTTP on 127.0.0.1 port 8000 ...
</pre>
<p>After you do this, you can point your web browser to <a class="reference external" href="http://localhost:8000">http://localhost:8000</a> and you should see
the sample site. This is useful as a "preview" of your work.</p>
<p>By default, the <tt class="docutils literal">serve</tt> command runs the web server on port 8000 on the IP address 127.0.0.1.
You can pass in an IP address and port number explicitly using <tt class="docutils literal"><span class="pre">-a</span> IP_ADDRESS</tt>
(short version of <tt class="docutils literal"><span class="pre">--address</span></tt>) or <tt class="docutils literal"><span class="pre">-p</span> PORT_NUMBER</tt> (short version of <tt class="docutils literal"><span class="pre">--port</span></tt>)
Example usage:</p>
<pre class="literal-block">
$ nikola serve --address 0.0.0.0 --port 8080
Serving HTTP on 0.0.0.0 port 8080 ...
</pre>
</div>
<div class="section" id="creating-a-blog-post">
<h2><a class="toc-backref" href="handbook.html#id12">Creating a Blog Post</a></h2>
<p>To create a new post, the easiest way is to run <tt class="docutils literal">nikola new_post</tt>. You  will
be asked for a title for your post, and it will tell you where the post's file
is located.</p>
<p>By default, that file will contain also some extra information about your post ("the metadata").
It can be placed in a separate file by using the <tt class="docutils literal"><span class="pre">-2</span></tt> option, but it's generally
easier to keep it in a single location.</p>
<p>The contents of your post have to be written (by default) in <a class="reference external" href="http://docutils.sf.net">reStructuredText</a>
but you can use a lot of different markups using the <tt class="docutils literal"><span class="pre">-f</span></tt> option. Currently
Nikola supports bbcode, wiki, markdown, html, txt2tags and textile in addition
to reStructuredText.</p>
<p>You can control what markup compiler is used for each file extension with the <tt class="docutils literal">COMPILERS</tt>
option. The default configuration expects them to be placed in <tt class="docutils literal">posts</tt> but that can be
changed (see below, the <tt class="docutils literal">POSTS</tt> and <tt class="docutils literal">PAGES</tt> options)</p>
<p>This is how it works:</p>
<pre class="literal-block">
$ nikola new_post
Creating New Post
-----------------

Enter title: How to make money
Your post's text is at:  posts/how-to-make-money.txt
</pre>
<p>The content of that file is as follows:</p>
<pre class="literal-block">
.. title: How to make money
.. slug: how-to-make-money
.. date: 2012/09/15 19:52:05
.. tags:
.. link:
.. description:

Write your post here.
</pre>
<p>The <tt class="docutils literal">slug</tt> is the page name. Since often titles will have
characters that look bad on URLs, it's generated as a "clean" version of the title.
The third line is the post's date, and is set to "now".</p>
<p>The other lines are optional. Tags are comma-separated. The <tt class="docutils literal">link</tt> is an original
source for the content, and <tt class="docutils literal">description</tt> is mostly useful for SEO.</p>
<p>You can add your own metadata fields in the same manner, if you use a theme that
supports them (for example: <tt class="docutils literal">.. author: John Doe</tt>)</p>
<p>To add these metadata fields to all new posts by default, you can set the
variable <tt class="docutils literal">ADDITIONAL_METADATA</tt> in your configuration.  For example, you can
add the author metadata to all new posts by default, by adding the following
to your configuration</p>
<pre class="literal-block">
ADDITIONAL_METADATA = {
    'author': 'John Doe'
}
</pre>
<div class="sidebar">
<p class="first sidebar-title">Other Metadata Fields</p>
<p>Nikola will also use other metadata fields:</p>
<dl class="last docutils">
<dt>nocomments</dt>
<dd><p class="first">Set to "True" to disable comments. Example:</p>
<pre class="last literal-block">
.. nocomments: True
</pre>
</dd>
<dt>template</dt>
<dd><p class="first">Will change the template used to render this page/post specific page. Example:</p>
<pre class="literal-block">
.. template: story.tmpl
</pre>
<p class="last">That template needs to either be part of the theme, or be placed in a <tt class="docutils literal">templates/</tt>
folder inside your site.</p>
</dd>
<dt>password</dt>
<dd>The post will be encrypted and invisible until the reader enters the password.
Also, the post's sourcecode will not be available.</dd>
<dt>category</dt>
<dd>Like tags, except each post can have only one, and they usually have
more descriptive names.</dd>
<dt>annotations / noannotations</dt>
<dd>Override the value of the <tt class="docutils literal">ANNOTATIONS</tt> option for this specific post or page.</dd>
<dt>author</dt>
<dd>Author of the post, will be used in the RSS feed and possibly in the post
display (theme-dependent)</dd>
<dt>hidetitle</dt>
<dd>Set "True" if you do not want to see the <strong>story</strong> title as a
heading of the page (does not work for posts).</dd>
</dl>
</div>
<div class="note">
<p class="first admonition-title">Note</p>
<p>The Two-File Format</p>
<p>Nikola originally used a separate <tt class="docutils literal">.meta</tt> file. That will still work!
The format of the meta files is the same as shown above, but without the
explanations:</p>
<pre class="last literal-block">
How to make money
how-to-make-money
2012/09/15 19:52:05
</pre>
</div>
<p>If you are writing a multilingual site, you can also create a per-language
post file (for example: <tt class="docutils literal"><span class="pre">how-to-make-money.txt.es</span></tt>). This one can replace
metadata of the default language, for example:</p>
<ul class="simple">
<li>The translated title for the post or page</li>
<li>A translated version of the page name</li>
</ul>
<p>You can edit these files with your favourite text editor, and once you are happy
with the contents, generate the pages as explained in <a class="reference internal" href="handbook.html#getting-started">Getting Started</a></p>
<p>Currently supported languages are</p>
<ul class="simple">
<li>Catalan</li>
<li>English</li>
<li>French</li>
<li>German</li>
<li>Greek</li>
<li>Italian</li>
<li>Polish</li>
<li>Russian</li>
<li>Simplified Chinese.</li>
<li>Spanish</li>
</ul>
<p>If you wish to add support for more languages, check out the instructions
at the <a class="reference external" href="http://getnikola.com/theming.html">theming guide</a>.</p>
<p>The post page is generated using the <tt class="docutils literal">post.tmpl</tt> template, which you can use
to customize the output.</p>
<p>The place where the post will be placed by <tt class="docutils literal">new_post</tt> is based on the <tt class="docutils literal">POSTS</tt>
and <tt class="docutils literal">PAGES</tt> configuration options:</p>
<pre class="literal-block">
# POSTS and PAGES contains (wildcard, destination, template) tuples.
#
# The wildcard is used to generate a list of reSt source files
# (whatever/thing.txt).
#
# That fragment could have an associated metadata file (whatever/thing.meta),
# and optionally translated files (example for spanish, with code "es"):
#     whatever/thing.txt.es and whatever/thing.meta.es
#
# From those files, a set of HTML fragment files will be generated:
# cache/whatever/thing.html (and maybe cache/whatever/thing.html.es)
#
# These files are combinated with the template to produce rendered
# pages, which will be placed at
# output / TRANSLATIONS[lang] / destination / pagename.html
#
# where "pagename" is the "slug" specified in the metadata file.
#
# The difference between POSTS and PAGES is that POSTS are added
# to feeds and are considered part of a blog, while PAGES are
# just independent HTML pages.
#

POSTS = (
    ("posts/*.txt", "posts", "post.tmpl"),
    ("posts/*.rst", "posts", "post.tmpl"),
)
PAGES = (
    ("stories/*.txt", "stories", "story.tmpl"),
    ("stories/*.rst", "stories", "story.tmpl"),
)
</pre>
<p>It will use the first location that has the last item in <tt class="docutils literal">POSTS</tt>, or the last
one in <tt class="docutils literal">PAGES</tt> if <tt class="docutils literal">POSTS</tt> is empty.</p>
<p>The <tt class="docutils literal">new_post</tt> command supports some options:</p>
<pre class="literal-block">
$ nikola help new_post
Purpose: Create a new blog post or site page.
Usage:   nikola new_post [options] [path]

Options:
  -p, --page                Create a page instead of a blog post.
  -t ARG, --title=ARG       Title for the page/post.
  --tags=ARG                Comma-separated tags for the page/post.
  -1                        Create post with embedded metadata (single file format)
  -2                        Create post with separate metadata (two file format)
  -f ARG, --format=ARG      Markup format for post, one of rest, markdown, wiki, bbcode, html, textile, txt2tags
</pre>
<p>The optional <tt class="docutils literal">path</tt> parameter tells nikola exactly where to put it instead of guessing from your config.
So, if you do <tt class="docutils literal">nikola new_post posts/random/foo.txt</tt> you will have a post in that path, with
"foo" as its slug.</p>
<div class="section" id="teasers">
<h3><a class="toc-backref" href="handbook.html#id13">Teasers</a></h3>
<p>You may not want to show the complete content of your posts either on your
index page or in RSS feeds, but to display instead only the beginning of them.</p>
<p>If it's the case, you only need to add a "magical comment" in your post.</p>
<p>In reStructuredText:</p>
<pre class="literal-block">
.. TEASER_END
</pre>
<p>In Markdown:</p>
<pre class="literal-block">
&lt;!-- TEASER_END --&gt;
</pre>
<p>By default all your RSS feeds will be shortened (they'll contain only teasers)
whereas your index page will still show complete posts. You can change
this behaviour with your <tt class="docutils literal">conf.py</tt>: <tt class="docutils literal">INDEX_TEASERS</tt> defines whether index
page should display the whole contents or only teasers. <tt class="docutils literal">RSS_TEASERS</tt>
works the same way for your RSS feeds.</p>
<p>By default, teasers will include a "read more" link at the end. If you want to
change that text, you can use a custom teaser:</p>
<pre class="literal-block">
.. TEASER_END: click to read the rest of the article
</pre>
<p>Or you can completely customize the link using the <tt class="docutils literal">READ_MORE_LINK</tt> option:</p>
<pre class="literal-block">
# A HTML fragment with the Read more... link.
# The following tags exist and are replaced for you:
# {link}        A link to the full post page.
# {read_more}   The string “Read more” in the current language.
# {{            A literal { (U+007B LEFT CURLY BRACKET)
# }}            A literal } (U+007D RIGHT CURLY BRACKET)
# READ_MORE_LINK = '&lt;p class="more"&gt;&lt;a href="{link}"&gt;{read_more}…&lt;/a&gt;&lt;/p&gt;'
</pre>
</div>
<div class="section" id="drafts">
<h3><a class="toc-backref" href="handbook.html#id14">Drafts</a></h3>
<p>If you add a "draft" tag to a post, then it will not be shown in indexes and feeds.
It <em>will</em> be compiled, and if you deploy it it <em>will</em> be made available, so use
with care. If you wish your drafts to be not available in your deployed site, you
can set <tt class="docutils literal">DEPLOY_DRAFTS = False</tt> in your configuration.</p>
<p>Also if a post has a date in the future, it will not be shown in indexes until
you rebuild after that date. This behaviour can be disabled by setting
<tt class="docutils literal">FUTURE_IS_NOW = True</tt> in your configuration, which will make future posts be
published immediately.  Posts dated in the future are <em>not</em> deployed by default
(when <tt class="docutils literal">FUTURE_IS_NOW = False</tt>).  To make future posts available in the
deployed site, you can set <tt class="docutils literal">DEPLOY_FUTURE = True</tt> in your configuration.
Generally, you want FUTURE_IS_NOW and DEPLOY_FUTURE to be the same value.</p>
</div>
<div class="section" id="retired-posts">
<h3><a class="toc-backref" href="handbook.html#id15">Retired Posts</a></h3>
<p>If you add a "retired" tag to a post, then it will not be shown in indexes and feeds.
It <em>will</em> be compiled, and if you deploy it it <em>will</em> be made available, so it will
not generate 404s for people who had linked to it.</p>
</div>
<div class="section" id="queuing-posts">
<h3><a class="toc-backref" href="handbook.html#id16">Queuing Posts</a></h3>
<p>Some blogs tend to have new posts based on a schedule (for example,
every Mon, Wed, Fri) but the blog authors don't like to manually
schedule their posts.  You can schedule your blog posts based on a
rule, by specifying a rule in the <tt class="docutils literal">SCHEDULE_RULE</tt> in your
configuration.  You can either post specific blog posts according to
this schedule by using the <tt class="docutils literal"><span class="pre">--schedule</span></tt> flag on the <tt class="docutils literal">new_post</tt>
command or post all new posts according to this schedule by setting
<tt class="docutils literal">SCHEDULE_ALL = True</tt> in your configuration. (Note: This feature
requires that the <tt class="docutils literal">FUTURE_IS_NOW</tt> setting is set to <tt class="docutils literal">False</tt>)</p>
<p>For example, if you would like to schedule your posts to be on every
Monday, Wednesday and Friday at 7am, add the following
<tt class="docutils literal">SCHEDULE_RULE</tt> to your configuration</p>
<pre class="literal-block">
SCHEDULE_RULE = 'RRULE:FREQ=WEEKLY;BYDAY=MO,WE,FR;BYHOUR=7;BYMINUTE=0;BYSECOND=0'
</pre>
<p>For more details on how to specify a recurrence rule, look at the
<a class="reference external" href="http://www.kanzaki.com/docs/ical/rrule.html">iCal specification</a>.</p>
<p>Say, you get a free Sunday, and want to write a flurry of new posts,
or at least posts for the rest of the week, you would run the
<tt class="docutils literal">new_post</tt> command with the <tt class="docutils literal"><span class="pre">--schedule</span></tt> flag, as many times as
you want:</p>
<pre class="literal-block">
$ nikola new_post --schedule
# Creates a new post to be posted on Monday, 7am.
$ nikola new_post -s
# Creates a new post to be posted on Wednesday, 7am.
$ nikola new_post -s
# Creates a new post to be posted on Friday, 7am.
.
.
.
</pre>
<p>All these posts get queued up according to your schedule, but note
that you will anyway need to build and deploy your site for the posts
to appear online.  You can have a cron job that does this regularly.</p>
<p>An additional setting (<tt class="docutils literal">SCHEDULE_FORCE_TODAY = True</tt>) lets you tell
Nikola to make the post today, if you run the <tt class="docutils literal">new_post <span class="pre">--schedule</span></tt>
after the scheduled hour has passed, and there is no other post
at/after the scheduled hour.  Concretely, say, you run the <tt class="docutils literal">nikola
new_post <span class="pre">-s</span></tt> command at 10am on a Monday (with the schedule rule set
to the same as above), with no other post on Monday, at/after 7am,
setting <tt class="docutils literal">SCHEDULE_FORCE_TODAY = True</tt> will have your post scheduled
to Monday, instead of being scheduled to Wednesday 7am.</p>
</div>
</div>
<div class="section" id="creating-a-page">
<h2><a class="toc-backref" href="handbook.html#id17">Creating a Page</a></h2>
<p>Pages are the same as posts, except that:</p>
<ul class="simple">
<li>They are not added to the front page</li>
<li>They don't appear on the RSS feed</li>
<li>They use the <tt class="docutils literal">story.tmpl</tt> template instead of <tt class="docutils literal">post.tmpl</tt> by default</li>
</ul>
<p>The default configuration expects the page's metadata and text files to be on the
<tt class="docutils literal">stories</tt> folder, but that can be changed (see <tt class="docutils literal">PAGES</tt> option above).</p>
<p>You can create the page's files manually or use the <tt class="docutils literal">new_post</tt> command
with the <tt class="docutils literal"><span class="pre">-p</span></tt> option, which will place the files in the folder that
has <tt class="docutils literal">use_in_feed</tt> set to False.</p>
</div>
<div class="section" id="redirections">
<h2><a class="toc-backref" href="handbook.html#id18">Redirections</a></h2>
<p>If you need a page to be available in more than one place, you can define redirections
in your <tt class="docutils literal">conf.py</tt>:</p>
<pre class="literal-block">
# A list of redirection tuples, [("foo/from.html", "/bar/to.html")].
#
# A HTML file will be created in output/foo/from.html that redirects
# to the "/bar/to.html" URL. notice that the "from" side MUST be a
# relative URL.
#
# If you don't need any of these, just set to []

REDIRECTIONS = [("index.html", "/weblog/index.html")]
</pre>
<p>It's better if you can do these using your web server's configuration, but if
you can't, this will work.</p>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="handbook.html#id19">Configuration</a></h2>
<p>The configuration file is called <tt class="docutils literal">conf.py</tt> and can be used to customize a lot of
what Nikola does. Its syntax is python, but if you don't know the language, it
still should not be terribly hard to grasp.</p>
<p>The default <tt class="docutils literal">conf.py</tt> you get with Nikola should be fairly complete, and is quite
commented.</p>
<p>You surely want to edit these options:</p>
<pre class="literal-block">
# Data about this site
BLOG_TITLE = "Demo Site"
SITE_URL = "http://getnikola.com"
BLOG_EMAIL = "joe@demo.site"
BLOG_DESCRIPTION = "This is a demo site for Nikola."
</pre>
</div>
<div class="section" id="customizing-your-site">
<h2><a class="toc-backref" href="handbook.html#id20">Customizing Your Site</a></h2>
<p>There are lots of things you can do to personalize your website, but let's see
the easy ones!</p>
<dl class="docutils">
<dt>CSS tweaking</dt>
<dd><p class="first">The default configuration includes a file, <tt class="docutils literal">themes/default/assets/css/custom.css</tt>
which is empty. Put your CSS there, for minimal disruption of the provided CSS files.</p>
<p class="last">If you feel tempted to touch other files in assets, you probably will be better off
with a <a class="reference external" href="theming.html">custom theme</a>.</p>
</dd>
<dt>Template tweaking</dt>
<dd>If you really want to change the pages radically, you will want to do a
<a class="reference external" href="theming.html">custom theme</a>.</dd>
<dt>Navigation Links</dt>
<dd><p class="first">The 'NAVIGATION_LINKS' option lets you define what links go in a sidebar or menu
(depending on your theme) so you can link to important pages, or to other sites.</p>
<p>The format is a language-indexed dictionary, where each element is a tuple of
tuples which are one of:</p>
<ol class="arabic simple">
<li>A (url, text) tuple, describing a link</li>
<li>A ((url, text), (url, text), (url, text), title) tuple, describing a submenu / sublist.</li>
</ol>
<p>Example:</p>
<pre class="literal-block">
NAVIGATION_LINKS = {
    DEFAULT_LANG: (
        ('/archive.html', 'Archives'),
        ('/categories/index.html', 'Tags'),
        ('/rss.xml', 'RSS'),
        ((('/foo', 'FOO'),
          ('/bar', 'BAR')), 'BAZ'),
    ),
}
</pre>
<p class="last">The <tt class="docutils literal">SEARCH_FORM</tt> option contains the HTML code for a search form based on
duckduckgo.com which should always work, but feel free to change it to
something else.</p>
</dd>
<dt>Footer</dt>
<dd><tt class="docutils literal">CONTENT_FOOTER</tt> is displayed, small at the bottom of all pages, I use it for
the copyright notice. The default shows a text formed using <tt class="docutils literal">BLOG_AUTHOR</tt>,
<tt class="docutils literal">BLOG_EMAIL</tt>, the date and <tt class="docutils literal">LICENSE</tt>.</dd>
<dt>BODY_END</dt>
<dd>This option lets you define a HTML snippet that will be added at the bottom of body.
The main usage is a Google analytics snippet or something similar, but you can really
put anything there. Good place for JavaScript.</dd>
<dt>SOCIAL_BUTTONS_CODE</dt>
<dd>The <tt class="docutils literal">SOCIAL_BUTTONS_CODE</tt> option lets you define a HTML snippet that will be added
at the bottom of body. It defaults to a snippet for AddThis, but you can
really put anything there. See <cite>social_buttons.html</cite> for more details.</dd>
</dl>
</div>
<div class="section" id="adding-files">
<h2><a class="toc-backref" href="handbook.html#id21">Adding Files</a></h2>
<p>Any files you want to be in <tt class="docutils literal">output/</tt> but are not generated by Nikola (for example,
<tt class="docutils literal">favicon.ico</tt>) just put it in <tt class="docutils literal">files/</tt>. Everything there is copied into
<tt class="docutils literal">output</tt> by the <tt class="docutils literal">copy_files</tt> task. Remember that you can't have files that collide
with files Nikola generates (it will give an error).</p>
<div class="admonition-important admonition">
<p class="first admonition-title">Important</p>
<p class="last">Don't put any files manually in <tt class="docutils literal">output/</tt>. Ever. Really. Maybe someday Nikola
will just wipe <tt class="docutils literal">output/</tt> and then you will be sorry. So, please don't do that.</p>
</div>
<p>If you want to copy more than one folder of static files into <tt class="docutils literal">output</tt> you can
change the FILES_FOLDERS option:</p>
<pre class="literal-block">
# One or more folders containing files to be copied as-is into the output.
# The format is a dictionary of "source" "relative destination".
# Default is:
# FILES_FOLDERS = {'files': '' }
# Which means copy 'files' into 'output'
</pre>
</div>
<div class="section" id="getting-more-themes">
<h2><a class="toc-backref" href="handbook.html#id22">Getting More Themes</a></h2>
<p>There are a few themes for Nikola. They are available at
the <a class="reference external" href="http://themes.getnikola.com/">Themes Index</a>.
Nikola has a built-in theme download/install mechanism to install those themes — the <tt class="docutils literal">install_theme</tt> command:</p>
<pre class="literal-block">
$ nikola install_theme -l
Themes:
-------
base-jinja
blogtxt
⋮
⋮

$ nikola install_theme blogtxt
[2013-10-12T16:46:13Z] NOTICE: install_theme: Downloading:
http://themes.getnikola.com/v6/blogtxt.zip
[2013-10-12T16:46:15Z] NOTICE: install_theme: Extracting: blogtxt into themes
</pre>
<p>And there you are, you now have themes/blogtxt installed. It's very
rudimentary, but it should work in most cases.</p>
<p>If you create a nice theme, please share it!  You can do it as a pull
request in the  <a class="reference external" href="https://github.com/getnikola/nikola-themes">GitHub repository</a>.</p>
<p>One other option is to tweak an existing theme using a different color scheme,
typography and CSS in general. Nikola provides a <tt class="docutils literal">bootswatch_theme</tt> option
to create a custom theme by downloading free CSS files from <a class="reference external" href="http://bootswatch.com">http://bootswatch.com</a>:</p>
<pre class="literal-block">
$ nikola bootswatch_theme -n custom_theme -s spruce -p bootstrap3
[2013-10-12T16:46:58Z] NOTICE: bootswatch_theme: Creating 'custom_theme' theme
from 'spruce' and 'bootstrap3'
[2013-10-12T16:46:58Z] NOTICE: bootswatch_theme: Downloading:
http://bootswatch.com//spruce/bootstrap.min.css
[2013-10-12T16:46:58Z] NOTICE: bootswatch_theme: Downloading:
http://bootswatch.com//spruce/bootstrap.css
[2013-10-12T16:46:59Z] NOTICE: bootswatch_theme: Theme created. Change the THEME setting to "custom_theme" to use it.
</pre>
<p>You can even try what different swatches do on an existing site using
their handy <a class="reference external" href="http://news.bootswatch.com/post/29555952123/a-bookmarklet-for-bootswatch">bootswatchlet</a></p>
<p>Play with it, there's cool stuff there. This feature was suggested by
<a class="reference external" href="http://elgalpondebanquito.com.ar">clodo</a>.</p>
</div>
<div class="section" id="deployment">
<h2><a class="toc-backref" href="handbook.html#id23">Deployment</a></h2>
<p>Nikola doesn't really have a concept of deployment. However, if you can specify your
deployment procedure as a series of commands, you can put them in the <tt class="docutils literal">DEPLOY_COMMANDS</tt>
option, and run them with <tt class="docutils literal">nikola deploy</tt>.</p>
<p>One caveat is that if any command has a % in it, you should double them.</p>
<p>Here is an example, from my own site's deployment script:</p>
<pre class="literal-block">
DEPLOY_COMMANDS = [
    'rsync -rav --delete output/* ralsina@lateral.netmanagers.com.ar:/srv/www/lateral',
    'rdiff-backup output ~/blog-backup',
    "links -dump 'http://www.twingly.com/ping2?url=lateral.netmanagers.com.ar'",
]
</pre>
<p>Other interesting ideas are using
<a class="reference external" href="http://toroid.org/ams/git-website-howto">git as a deployment mechanism</a> (or any other VCS
for that matter), using <a class="reference external" href="http://lftp.yar.ru/">lftp mirror</a> or unison, or Dropbox, or
Ubuntu One. Any way you can think of to copy files from one place to another is good enough.</p>
</div>
<div class="section" id="comments-and-annotations">
<h2><a class="toc-backref" href="handbook.html#id24">Comments and Annotations</a></h2>
<p>While Nikola creates static sites, there is a minimum level of user interaction you
are probably expecting: comments.</p>
<p>Nikola supports several third party comment systems:</p>
<ul class="simple">
<li><a class="reference external" href="http://disqus.com">DISQUS</a></li>
<li><a class="reference external" href="http://www.intensedebate.com/">IntenseDebate</a></li>
<li><a class="reference external" href="http://www.livefyre.com/">LiveFyre</a></li>
<li><a class="reference external" href="http://moot.it">Moot</a></li>
<li><a class="reference external" href="http://plus.google.com">Google+</a></li>
<li><a class="reference external" href="http://facebook.com">Facebook</a></li>
</ul>
<p>By default it will use DISQUS, but you can change by setting <tt class="docutils literal">COMMENT_SYSTEM</tt>
to one of "disqus", "intensedebate", "livefyre", "moot", "googleplus" or
"facebook"</p>
<div class="sidebar">
<p class="first sidebar-title"><tt class="docutils literal">COMMENT_SYSTEM_ID</tt></p>
<p>The value of <tt class="docutils literal">COMMENT_SYSTEM_ID</tt> depends on what comment system you
are using and you can see it in the system's admin interface.</p>
<ul class="last simple">
<li>For DISQUS it's called the <strong>shortname</strong></li>
<li>In IntenseDebate it's the <strong>IntenseDebate site acct</strong></li>
<li>In LiveFyre it's the <strong>siteId</strong></li>
<li>In Moot it's your <strong>username</strong></li>
<li>For Google Plus, <tt class="docutils literal">COMMENT_SYSTEM_ID</tt> need not be set, but you must
<a class="reference external" href="https://plus.google.com/authorship">verify your authorship</a></li>
<li>For Facebook, you need to <cite>create an app
&lt;https://developers.facebook.com/apps&gt;</cite> (turn off sandbox mode!)
and get an <strong>App ID</strong></li>
</ul>
</div>
<p>To use comments in a visible site, you should register with the service and
then set the <tt class="docutils literal">COMMENT_SYSTEM_ID</tt> option.</p>
<p>I recommend 3rd party comments, and specially DISQUS because:</p>
<ol class="arabic simple">
<li>It doesn't require any server-side software on your site</li>
<li>They offer you a way to export your comments, so you can take
them with you if you need to.</li>
<li>It's free.</li>
<li>It's damn nice.</li>
</ol>
<p>You can disable comments for a post by adding a "nocomments" metadata field to it:</p>
<pre class="literal-block">
.. nocomments: True
</pre>
<div class="admonition-disqus-support admonition">
<p class="first admonition-title">DISQUS Support</p>
<p class="last">In some cases, when you run the test site, you won't see the comments.
That can be fixed by adding the disqus_developer flag to the templates
but it's probably more trouble than it's worth.</p>
</div>
<div class="admonition-moot-support admonition">
<p class="first admonition-title">Moot Support</p>
<p>Moot doesn't support comment counts on index pages, and it requires adding
this to your <tt class="docutils literal">conf.py</tt>:</p>
<pre class="code python last literal-block">
<span class="n">BODY_END</span> <span class="o">=</span> <span class="s">"""
&lt;script src="//cdn.moot.it/1/moot.min.js"&gt;&lt;/script&gt;
"""</span>
<span class="n">EXTRA_HEAD_DATA</span> <span class="o">=</span> <span class="s">"""
&lt;link rel="stylesheet" type="text/css" href="//cdn.moot.it/1/moot.css"&gt;
&lt;meta name="viewport" content="width=device-width"&gt;
&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;
"""</span>
</pre>
</div>
<div class="admonition-facebook-support admonition">
<p class="first admonition-title">Facebook Support</p>
<p class="last">You need jQuery, but not because Facebook wants it (see Issue
#639).</p>
</div>
<p>An alternative or complement to comments are annotations. Nikola integrates
the annotation service provided by <a class="reference external" href="annotateit.org">AnnotateIt.</a>
To use it, set the <tt class="docutils literal">ANNOTATIONS</tt> option to True. This is specially useful
if you want feedback on specific parts of your writing.</p>
<p>You can enable or disable annotations for specific posts or pages using the
<tt class="docutils literal">annotations</tt> and <tt class="docutils literal">noannotations</tt> metadata.</p>
<p>Annotations require JQuery and are therefore not supported in the base theme.
You can check bootstrap theme's <tt class="docutils literal">base.html</tt> for details on how to handle them in
custom themes.</p>
</div>
<div class="section" id="image-galleries">
<h2><a class="toc-backref" href="handbook.html#id25">Image Galleries</a></h2>
<p>To create an image gallery, all you have to do is add a folder inside <tt class="docutils literal">galleries</tt>,
and put images there. Nikola will take care of creating thumbnails, index page, etc.</p>
<p>If you click on images on a gallery, you should see a bigger image, thanks to
the excellent <a class="reference external" href="http://www.jacklmoore.com/colorbox">colorbox</a></p>
<p>The gallery pages are generated using the <tt class="docutils literal">gallery.tmpl</tt> template, and you can
customize it there (you could switch to another lightbox instead of colorbox, change
its settings, change the layout, etc.).</p>
<p>The <tt class="docutils literal">conf.py</tt> options affecting gallery pages are these:</p>
<pre class="literal-block">
# Galleries are folders in galleries/
# Final location of galleries will be output / GALLERY_PATH / gallery_name
GALLERY_PATH = "galleries"
THUMBNAIL_SIZE = 180
MAX_IMAGE_SIZE = 1280
USE_FILENAME_AS_TITLE = True
GALLERY_SORT_BY_DATE = False
EXTRA_IMAGE_EXTENSIONS = []
</pre>
<p>If you add a file in <tt class="docutils literal">galleries/gallery_name/index.txt</tt> its contents will be
converted to HTML and inserted above the images in the gallery page. The
format is the same as for posts.</p>
<p>If you add some image filenames in <tt class="docutils literal">galleries/gallery_name/exclude.meta</tt>, they
will be excluded in the gallery page.</p>
<p>If <tt class="docutils literal">USE_FILENAME_AS_TITLE</tt> is True the filename (parsed as a readable string)
is used as the photo caption. If the filename starts with a number, it will
be stripped. For example <tt class="docutils literal">03_an_amazing_sunrise.jpg</tt> will be render as <em>An amazing sunrise</em>.</p>
<p>Here is a <a class="reference external" href="../galleries/demo">demo gallery</a> of historic, public domain Nikola
Tesla pictures taken from <a class="reference external" href="http://kerryr.net/pioneers/gallery/tesla.htm">this site</a>.</p>
</div>
<div class="section" id="post-processing-filters">
<h2><a class="toc-backref" href="handbook.html#id26">Post Processing Filters</a></h2>
<p>You can apply post processing to the files in your site, in order to optimize them
or change them in arbitrary ways. For example, you may want to compress all CSS
and JS files using yui-compressor.</p>
<p>To do that, you can use the provided helper adding this in your <tt class="docutils literal">config.py</tt>:</p>
<pre class="literal-block">
from nikola import filters

FILTERS = {
  ".css": [filters.yui_compressor],
  ".js": [filters.yui_compressor],
}
</pre>
<p>Where <tt class="docutils literal">filters.yui_compressor</tt> is a helper function provided by Nikola. You can
replace that with strings describing command lines, or arbitrary python functions.</p>
<p>If there's any specific thing you expect to be generally useful as a filter, contact
me and I will add it to the filters library so that more people use it.</p>
<p>The currently available filters are:</p>
<div class="sidebar">
<p class="first sidebar-title">Creating your own filters</p>
<p>You can use any program name that works in place as a filter, like <tt class="docutils literal">sed <span class="pre">-i</span></tt>
and you can use arbitrary python functions as filters, too.</p>
<p>If your program doesn't run in-place, then you can use Nikola's runinplace function.
For example, this is how the yui_compressor filter is implemented:</p>
<pre class="code python literal-block">
<span class="k">def</span> <span class="nf">yui_compressor</span><span class="p">(</span><span class="n">infile</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">runinplace</span><span class="p">(</span><span class="s">r'yui-compressor --nomunge %1 -o %2'</span><span class="p">,</span> <span class="n">infile</span><span class="p">)</span>
</pre>
<p>You can turn any function into a filter using <tt class="docutils literal">apply_to_file</tt>.
As a silly example, this would make everything uppercase and totally break
your website:</p>
<pre class="code python last literal-block">
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">from</span> <span class="nn">nikola.filters</span> <span class="kn">import</span> <span class="n">apply_to_file</span>
<span class="n">FILTERS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">".html"</span><span class="p">:</span> <span class="p">[</span><span class="n">apply_to_file</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">upper</span><span class="p">)]</span>
<span class="p">}</span>
</pre>
</div>
<dl class="docutils">
<dt>yui_compressor</dt>
<dd>Compress files using <a class="reference external" href="http://yui.github.io/yuicompressor/">YUI compressor</a></dd>
<dt>optipng</dt>
<dd>Compress PNG files using <a class="reference external" href="http://optipng.sourceforge.net/">optipng</a></dd>
<dt>jpegoptim</dt>
<dd>Compress JPEG files using <a class="reference external" href="http://www.kokkonen.net/tjko/projects.html">jpegoptim</a></dd>
<dt>tidy</dt>
<dd>Apply <a class="reference external" href="http://tidy.sourceforge.net/">tidy</a> to HTML files</dd>
<dt>typogrify</dt>
<dd>Improve typography using <a class="reference external" href="https://github.com/mintchaos/typogrify">typogrify</a></dd>
</dl>
</div>
<div class="section" id="optimizing-your-website">
<h2><a class="toc-backref" href="handbook.html#id27">Optimizing Your Website</a></h2>
<p>One of the main goals of Nikola is to make your site fast and light. So here are a few
tips we have found when setting up Nikola with Apache. If you have more, or
different ones, or about other web servers, please share!</p>
<ol class="arabic">
<li><p class="first">Use a speed testing tool. I used Yahoo's YSlow but you can use any of them, and
it's probably a good idea to use more than one.</p>
</li>
<li><p class="first">Enable compression in Apache:</p>
<pre class="literal-block">
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css
</pre>
</li>
<li><p class="first">If even after you did the previous step the CSS files are not sent compressed:</p>
<pre class="literal-block">
AddType text/css .css
</pre>
</li>
<li><p class="first">Optionally you can greate static compressed copies and save some CPU on your server
with the GZIP_FILES option in Nikola.</p>
</li>
<li><p class="first">The webassets Nikola plugin can drastically decrease the number of CSS and JS files your site fetches.</p>
</li>
<li><p class="first">Through the filters feature, you can run your files through arbitrary commands, so that images
are recompressed, JavaScript is minimized, etc.</p>
</li>
<li><p class="first">The USE_CDN option offloads standard JavaScript and CSS files to a CDN so they are not
downloaded from your server.</p>
</li>
</ol>
</div>
<div class="section" id="restructuredtext-extensions">
<h2><a class="toc-backref" href="handbook.html#id28">reStructuredText Extensions</a></h2>
<p>Nikola includes support for a few directives and roles that are not part of docutils, but which
we think are handy for website development.</p>
<div class="section" id="media">
<h3><a class="toc-backref" href="handbook.html#id29">Media</a></h3>
<p>This directive lets you embed media from a variety of sites automatically by just passing the
URL of the page.  For example here are two random videos:</p>
<pre class="literal-block">
.. media:: http://vimeo.com/72425090

.. youtube:: http://www.youtube.com/watch?v=wyRpAat5oz0
</pre>
<p>It supports Instagram, Flickr, Github gists, Funny or Die, and dozens more, thanks to <a class="reference external" href="https://github.com/coleifer/micawber">Micawber</a></p>
</div>
<div class="section" id="youtube">
<h3><a class="toc-backref" href="handbook.html#id30">YouTube</a></h3>
<p>To link to a YouTube video, you need the id of the video. For example, if the
URL of the video is <a class="reference external" href="http://www.youtube.com/watch?v=8N_tupPBtWQ">http://www.youtube.com/watch?v=8N_tupPBtWQ</a> what you need is
<strong>8N_tupPBtWQ</strong></p>
<p>Once you have that, all you need to do is:</p>
<pre class="literal-block">
.. youtube:: 8N_tupPBtWQ
</pre>
</div>
<div class="section" id="vimeo">
<h3><a class="toc-backref" href="handbook.html#id31">Vimeo</a></h3>
<p>To link to a Vimeo video, you need the id of the video. For example, if the
URL of the video is <a class="reference external" href="http://www.vimeo.com/20241459">http://www.vimeo.com/20241459</a> then the id is <strong>20241459</strong></p>
<p>Once you have that, all you need to do is:</p>
<pre class="literal-block">
.. vimeo:: 20241459
</pre>
<p>If you have internet connectivity when generating your site, the height and width of
the embedded player will be set to the native height and width of the video.
You can override this if you wish:</p>
<pre class="literal-block">
.. vimeo:: 20241459
   :height: 240
   :width: 320
</pre>
</div>
<div class="section" id="soundcloud">
<h3><a class="toc-backref" href="handbook.html#id32">Soundcloud</a></h3>
<p>This directive lets you share music from <a class="reference external" href="http://soundcloud.com">http://soundcloud.com</a> You first need to get the
ID for the piece, which you can find in the "share" link. For example, if the
WordPress code starts like this:</p>
<pre class="literal-block">
[soundcloud url="http://api.soundcloud.com/tracks/78131362"
</pre>
<p>The ID is 78131362 and you can embed the audio with this:</p>
<pre class="literal-block">
.. soundcloud:: 78131362
</pre>
</div>
<div class="section" id="code">
<h3><a class="toc-backref" href="handbook.html#id33">Code</a></h3>
<p>The <tt class="docutils literal">code</tt> directive has been included in docutils since version 0.9 and now
replaces Nikola's <tt class="docutils literal"><span class="pre">code-block</span></tt> directive. To ease the transition, two aliases
for <tt class="docutils literal">code</tt> directive are provided: <tt class="docutils literal"><span class="pre">code-block</span></tt> and <tt class="docutils literal">sourcecode</tt>:</p>
<pre class="literal-block">
.. code-block:: python
   :number-lines:

   print("Our virtues and our failings are inseparable")
</pre>
</div>
<div class="section" id="listing">
<h3><a class="toc-backref" href="handbook.html#id34">Listing</a></h3>
<p>To use this, you have to put your source code files inside <tt class="docutils literal">listings</tt> or whatever your
<tt class="docutils literal">LISTINGS_FOLDER</tt> variable is set to. Assuming you have a <tt class="docutils literal">foo.py</tt> inside that folder:</p>
<pre class="literal-block">
.. listing:: foo.py python
</pre>
<p>Will include the source code from <tt class="docutils literal">foo.py</tt>, highlight its syntax in python mode,
and also create a <tt class="docutils literal">listings/foo.py.html</tt> page and the listing will have a title linking to it.</p>
<p>Listings support a few extra options so that you can display a fragment instead of the whole
file in a document:</p>
<dl class="docutils">
<dt>start-at</dt>
<dd>Takes a string, and starts displaying the code at the first line that matches it.</dd>
<dt>start-before</dt>
<dd>Takes a string, and starts displaying the code right before the first line that matches it.</dd>
<dt>end-at</dt>
<dd>Takes a string, and stops displaying the code at the first line that matches it.</dd>
<dt>end-before</dt>
<dd>Takes a string, and stops displaying the code right before the first line that matches it.</dd>
</dl>
<p>If you set start-at and start-before, start-at wins. If you set end-at and end-before, end-at wins.
If you make it so your listing ends before it starts, it's frowned upon and nothing will be shown.</p>
</div>
<div class="section" id="gist">
<h3><a class="toc-backref" href="handbook.html#id35">Gist</a></h3>
<p>You can easily embed GitHub gists with this directive, like this:</p>
<pre class="literal-block">
.. gist:: 2395294
</pre>
<p>Producing this:</p>
<script src="https://gist.github.com/2395294.js"></script><noscript><pre class="literal-block">
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int nonHeapInt;

struct HeapObject
{
    int x;  // 因為如果找 x 的 pointer，實際上和找 HeapObject 的開頭 pointer 相同，
            // 所以我們必需加一個y，讓我們指定 pointer 時不會指到 HeapObject 的開頭。
    int y;
};

int main()
{
    struct HeapObject * heapObject = malloc(sizeof(struct HeapObject));

    nonHeapInt = 10;
    heapObject-&gt;y = 20;

    printf("Start nonHeapInt:%d\n", nonHeapInt);
    printf("Start heapObject-&gt;y:%d\n", heapObject-&gt;y);

    // free(&amp;nonHeapInt); // GCC 會警告，執行 glibc 會丟 invalid pointer exception
    // free(&amp;(heapObject-&gt;y)); // 雖然不會景告，但 glibc 還是會丟 invalid pointer exception

    printf("End nonHeapInt:%d\n", nonHeapInt);
    printf("End heapObject-&gt;y:%d\n", heapObject-&gt;y);

}

</pre>
</noscript><p>This degrades gracefully if the browser doesn't support JavaScript.</p>
</div>
<div class="section" id="slideshows">
<h3><a class="toc-backref" href="handbook.html#id36">Slideshows</a></h3>
<p>To create an image slideshow, you can use the <tt class="docutils literal">slides</tt> directive. For example:</p>
<pre class="literal-block">
.. slides::

   /galleries/demo/tesla_conducts_lg.jpg
   /galleries/demo/tesla_lightning2_lg.jpg
   /galleries/demo/tesla4_lg.jpg
   /galleries/demo/tesla_lightning1_lg.jpg
   /galleries/demo/tesla_tower1_lg.jpg
</pre>
</div>
<div class="section" id="chart">
<h3><a class="toc-backref" href="handbook.html#id37">Chart</a></h3>
<p>This directive is a thin wrapper around <a class="reference external" href="http://pygal.org/">Pygal</a> and will produce charts
as SVG files embedded directly in your pages.</p>
<p>Here's an example of how it works:</p>
<pre class="literal-block">
.. chart:: Bar
   :title: 'Browser usage evolution (in %)'
   :x_labels: ["2002", "2003", "2004", "2005", "2006", "2007"]

   'Firefox', [None, None, 0, 16.6, 25, 31]
   'Chrome',  [None, None, None, None, None, None]
   'IE',      [85.8, 84.6, 84.7, 74.5, 66, 58.6]
   'Others',  [14.2, 15.4, 15.3, 8.9, 9, 10.4]
</pre>
<p>The argument passed next to the directive (Bar in that example) is the type of chart, and can be one of
Line, StackedLine, Bar, StackedBar, HorizontalBar, XY, DateY, Pie, Radar, Dot, Funnel, Gauge, Pyramid. For
examples of what each kind of graph is, <a class="reference external" href="http://pygal.org/chart_types/">check here</a></p>
<p>It can take <em>a lot</em> of options to let you customize the charts (in the example, title and x_labels).
You can use any option described in <a class="reference external" href="http://pygal.org/basic_customizations/">the pygal docs</a></p>
<p>Finally, the content of the directive is the actual data, in the form of a label and
a list of values, one series per line.</p>
</div>
<div class="section" id="doc">
<h3><a class="toc-backref" href="handbook.html#id38">Doc</a></h3>
<p>This role is useful to make links to other post or page inside the same site.</p>
<p>Here's an example:</p>
<pre class="literal-block">
Take a look at :doc:`my other post &lt;creating-a-theme&gt;` about theme creating.
</pre>
<p>In this case we are giving the portion of text we want to link. So, the result will be:</p>
<blockquote>
Take a look at <a class="reference external" href="creating-a-theme.html">my other post</a> about theme creating.</blockquote>
<p>If we want to use the post's title as the link's text, just do:</p>
<pre class="literal-block">
Take a look at :doc:`creating-a-theme` to know how to do it.
</pre>
<p>and it will produce:</p>
<blockquote>
Take a look at <a class="reference external" href="creating-a-theme.html">Creating a Theme</a> to know how to do it.</blockquote>
</div>
</div>
<div class="section" id="importing-your-wordpress-site-into-nikola">
<h2><a class="toc-backref" href="handbook.html#id39">Importing Your WordPress Site Into Nikola</a></h2>
<p>If you like Nikola, and want to start using it, but you have a WordPress blog, Nikola
supports importing it. Here's the steps to do it:</p>
<ol class="arabic simple">
<li>Get a XML dump of your site <a class="footnote-reference" href="handbook.html#id2" id="id1">[1]</a></li>
<li>nikola import_wordpress mysite.wordpress.2012-12-20.xml</li>
</ol>
<p>After some time, this will create a <tt class="docutils literal">new_site</tt> folder with all your data. It currently supports
the following:</p>
<ul>
<li><p class="first">All your posts and pages</p>
</li>
<li><p class="first">Keeps "draft" status</p>
</li>
<li><p class="first">Your tags and categories</p>
</li>
<li><p class="first">Imports your attachments and fixes links to point to the right places</p>
</li>
<li><p class="first">Will try to add redirects that send the old post URLs to the new ones</p>
</li>
<li><p class="first">Will give you a url_map so you know where each old post was</p>
<p>This is also useful for DISQUS thread migration!</p>
</li>
<li><p class="first">Will try to convert the content of your posts. This is <em>not</em> error free, because
WordPress uses some unholy mix of HTML and strange things. Currently we are treating it
as markdown, which does a reasonable job of it.</p>
<p>You will find your old posts in <tt class="docutils literal"><span class="pre">new_site/posts/post-title.wp</span></tt> in case you need to fix
any of them.</p>
</li>
</ul>
<p>This feature is a work in progress, and the only way to improve it is to have it used for
as many sites as possible and make it work better each time, so I am happy to get requests
about it.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label"><col></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="handbook.html#id1">[1]</a></td><td><p class="first">The dump needs to be in 1.2 format. You can check by reading it, it should say
<tt class="docutils literal"><span class="pre">xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"</span></tt> near the top of the
file. If it says <tt class="docutils literal">1.1</tt> instead of <tt class="docutils literal">1.2</tt> you will have to update your
WordPress before dumping.</p>
<p class="last">Other versions may or may not work.</p>
</td></tr>
</tbody>
</table>
<div class="section" id="importing-to-a-custom-location-or-into-an-existing-site">
<h3><a class="toc-backref" href="handbook.html#id40">Importing To A Custom Location Or Into An Existing Site</a></h3>
<p>It is possible to either import into a location you desire or into an already existing Nikola site.
To do so you can specify a location after the dump.:</p>
<pre class="literal-block">
$ nikola import_wordpress  mysite.wordpress.2012-12-20.xml -o import_location
</pre>
<p>With this command Nikola will import into the folder <tt class="docutils literal">import_location</tt>.</p>
<p>If the folder already exists Nikola will not overwrite an existing <tt class="docutils literal">conf.py</tt>.
Instead a new file with a timestamp at the end of the filename will be created.</p>
</div>
</div>
<div class="section" id="using-twitter-cards">
<h2><a class="toc-backref" href="handbook.html#id41">Using Twitter Cards</a></h2>
<p>Twitter Cards enable you to show additional information in Tweets that link
to you content.
Nikola supports <a class="reference external" href="https://dev.twitter.com/docs/cards">Twitter Cards</a>.
They are implemented to use <em>Open Graph</em> tags whenever possible.</p>
<div class="admonition-important admonition">
<p class="first admonition-title">Important</p>
<p class="last">To use Twitter Cards you need to opt-in on Twitter.
To do so please use the form that can be found at <a class="reference external" href="https://dev.twitter.com/form/participate-twitter-cards">https://dev.twitter.com/form/participate-twitter-cards</a></p>
</div>
<p>To enable and configure your use of Twitter Cards please modify the
corresponding lines in your <tt class="docutils literal">conf.py</tt>.
An example configuration that uses the Twitter nickname of the website
and the authors Twitter user ID is found below.</p>
<pre class="code python literal-block">
<span class="n">TWITTER_CARD</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'use_twitter_cards'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>  <span class="c"># enable Twitter Cards / Open Graph</span>
    <span class="s">'site'</span><span class="p">:</span> <span class="s">'@website'</span><span class="p">,</span>  <span class="c"># twitter nick for the website</span>
    <span class="c"># 'site:id': 123456,  # Same as site, but the website's Twitter user ID instead.</span>
    <span class="c"># 'creator': '@username',  # Username for the content creator / author.</span>
    <span class="s">'creator:id'</span><span class="p">:</span> <span class="mi">654321</span><span class="p">,</span>  <span class="c"># Same as creator, but the Twitter user's ID.</span>
<span class="p">}</span>
</pre>
</div>
<div class="section" id="extra-plugins">
<h2><a class="toc-backref" href="handbook.html#id42">Extra Plugins</a></h2>
<p>These are plugins that may not be widely used or that are a bit too radical or
experimental for the general public.</p>
<p>To enable them for your site please look for <cite>ENABLED_EXTRAS</cite> in your <tt class="docutils literal">conf.py</tt>.</p>
<div class="section" id="planetoid">
<h3><a class="toc-backref" href="handbook.html#id43">Planetoid</a></h3>
<p>This plugin converts Nikola into the equivalent of <a class="reference external" href="http://www.planetplanet.org/">Planet</a>
a feed aggregator. It requires <a class="reference external" href="https://github.com/coleifer/peewee">PeeWee</a> and
<a class="reference external" href="http://code.google.com/p/feedparser/">Feedparser</a> to work.</p>
<p>It has a configuration option: PLANETOID_REFRESH which is the number of minutes
before retrying a feed (defaults to 60).</p>
<p>You need to create a <tt class="docutils literal">feeds</tt> file containing the data of which feeds you want to
aggregate. The format is very simple:</p>
<pre class="literal-block">
# Roberto Alsina
http://feeds2.feedburner.com/PostsInLateralOpinionAboutPython
Roberto Alsina
</pre>
<ol class="arabic simple">
<li>Lines that start with <tt class="docutils literal">#</tt> are comments and ignored.</li>
<li>Lines that start with http are feed URLs.</li>
<li>URL lines have to be followed by the "real name" of the feed.</li>
</ol>
<p>After all that is in place, just run <tt class="docutils literal">nikola build</tt> and you'll get
a planet.
If you run <tt class="docutils literal">nikola build</tt> for the first time you need to actually issue
the command three times until the planet is build.</p>
<p>There is a special theme for the planets called <cite>site-planetoid</cite>. To use
this set <cite>THEME</cite> in your <tt class="docutils literal">conf.py</tt> to <tt class="docutils literal"><span class="pre">'site-planetoid'</span></tt>.
This is special in the case that it redirects users to the original URL of the post
when they try to open a post.</p>
</div>
<div class="section" id="local-search">
<h3><a class="toc-backref" href="handbook.html#id44">Local Search</a></h3>
<p>If you don't want to depend on Google or DuckDuckGo to implement search for you,
or just want it to work even if you are offline, enable this plugin and the
search will be performed client side.</p>
<p>This plugin implements a Tipue-based local search for your site.</p>
<p>To use it, enable local_search in ENABLED_EXTRAS in your sites conf.py</p>
<p>After you build your site, you will have several new files in assets/css and assets/js
and a tipue_search.html that you can use as a basis for using this in your site.</p>
<p>For more information about how to customize it and use it, please refer to the tipue
docs at <a class="reference external" href="http://www.tipue.com/search/">http://www.tipue.com/search/</a></p>
<p>Tipue is under an MIT license (see MIT-LICENSE.txt)</p>
<p>Here's a set of example settings for conf.py that should work nicely with the "bootstrap" theme:</p>
<pre class="literal-block">
SEARCH_FORM = """
&lt;span class="navbar-form pull-left"&gt;
&lt;input type="text" id="tipue_search_input"&gt;
&lt;/span&gt;"""

BODY_END = """
&lt;script type="text/javascript" src="/assets/js/tipuesearch_set.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/assets/js/tipuesearch.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
$(document).ready(function() {
    $('#tipue_search_input').tipuesearch({
        'mode': 'json',
        'contentLocation': '/assets/js/tipuesearch_content.json',
        'showUrl': false
    });
});
&lt;/script&gt;
"""

EXTRA_HEAD_DATA = """
&lt;link rel="stylesheet" type="text/css" href="/assets/css/tipuesearch.css"&gt;
&lt;div id="tipue_search_content" style="margin-left: auto; margin-right: auto; padding: 20px;"&gt;&lt;/div&gt;
"""

ENABLED_EXTRAS = [ 'local_search' ]
</pre>
<p>The &lt;div&gt; in EXTRA_HEAD_DATA is a hack but it will migrate into the &lt;body&gt; of the
documents thanks to magic, and will hold the search results after the user searches.</p>
</div>
<div class="section" id="mustache">
<h3><a class="toc-backref" href="handbook.html#id45">Mustache</a></h3>
<p>This task gives you a <tt class="docutils literal">mustache.html</tt> file which lets you access your whole
blog without reloading the page, using client-side templates. Makes it much
faster and modern ;-)</p>
</div>
</div>
<div class="section" id="custom-plugins">
<h2><a class="toc-backref" href="handbook.html#id46">Custom Plugins</a></h2>
<p>You can create your own plugins (see <a class="reference external" href="extending.html">Extending Nikola</a>) and use them in your own
site by putting them in a <tt class="docutils literal">plugins/</tt> folder.</p>
</div>
<div class="section" id="getting-extra-plugins">
<h2><a class="toc-backref" href="handbook.html#id47">Getting Extra Plugins</a></h2>
<p>If you want extra plugins, there is also the <a class="reference external" href="http://plugins.getnikola.com/">Plugins Index</a>.</p>
<p>Similarly to themes, there is a nice, built-in command to install them —
<tt class="docutils literal">install_plugin</tt>:</p>
<blockquote>
<p>$ nikola install_plugin -l
Plugins:
--------
helloworld
tags
⋮
⋮</p>
<p>$ nikola install_plugin helloworld
[2013-10-12T16:51:56Z] NOTICE: install_plugin: Downloading: <a class="reference external" href="http://plugins.getnikola.com/v6/helloworld.zip">http://plugins.getnikola.com/v6/helloworld.zip</a>
[2013-10-12T16:51:58Z] NOTICE: install_plugin: Extracting: helloworld into plugins
plugins/helloworld/requirements.txt
[2013-10-12T16:51:58Z] NOTICE: install_plugin: This plugin has Python dependencies.
[2013-10-12T16:51:58Z] NOTICE: install_plugin: Installing dependencies with pip...
⋮
⋮
[2013-10-12T16:51:59Z] NOTICE: install_plugin: Dependency installation succeeded.
[2013-10-12T16:51:59Z] NOTICE: install_plugin: This plugin has a sample config file.
Contents of the conf.py.sample file:</p>
<blockquote>
# Should the Hello World plugin say “BYE” instead?
BYE_WORLD = False</blockquote>
</blockquote>
<p>You can also share plugins you created with the community!  Visit the
<a class="reference external" href="https://github.com/getnikola/plugins">GitHub repository</a> to find out more.</p>
</div>
<div class="section" id="license">
<h2><a class="toc-backref" href="handbook.html#id48">License</a></h2>
<p>Nikola is released under a <a class="reference external" href="https://github.com/getnikola/nikola/blob/master/LICENSE.txt">MIT license</a> which
is a free software license. Some components shipped along with Nikola, or required by it are
released under other licenses.</p>
<p>If you are not familiar with free software licensing: In general, you should be able to
do pretty much anything you want, unless you modify Nikola. If you modify it, and share
it with someone else, that someone else should get all your modifications under the same
license you got it.</p>
</div>

    </div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    Contents © 2015         <a href="mailto:joe@demo.site">thefakir</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
</div>

            <script src="../assets/js/all-nocdn.js" type="text/javascript"></script>


	
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});
    $(window).on('hashchange', function(){
        if (location.hash && $(location.hash)[0]) {
            $('body').animate({scrollTop: $(location.hash).offset().top - $('#navbar').outerHeight(true)*1.2 }, 1);
        }
    });
    $(document).ready(function(){$(window).trigger('hashchange')});
    </script>
    
    
</body>
</html>